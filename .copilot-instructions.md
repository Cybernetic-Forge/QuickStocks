# QuickStocks - Copilot Instructions

## Project Overview
QuickStocks is a Minecraft Paper plugin (version 1.21.8) that simulates a realistic stock market within the game. The plugin focuses on economical features and provides players with an immersive stock trading experience based on real-world market factors and behaviors.

## Architecture
The project follows an **Inversion of Control (IoC) architecture** with clear separation of concerns:

```
src/main/java/com/example/quickstocks/
â”œâ”€â”€ QuickStocksPlugin.java          # Main plugin class
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ services/                   # Business logic services
â”‚   â”‚   â””â”€â”€ StockMarketService.java # Core market management
â”‚   â”œâ”€â”€ models/                     # Data models
â”‚   â”‚   â”œâ”€â”€ Stock.java             # Stock representation
â”‚   â”‚   â””â”€â”€ MarketInfluence.java   # Market factor influences
â”‚   â”œâ”€â”€ algorithms/                # Core algorithms
â”‚   â”‚   â””â”€â”€ StockPriceCalculator.java # Realistic price calculation
â”‚   â”œâ”€â”€ enums/                     # Enumerations
â”‚   â”‚   â””â”€â”€ MarketFactor.java      # Market influence factors
â”‚   â”œâ”€â”€ interfaces/                # Contracts (future)
â”‚   â””â”€â”€ events/                    # Event system (future)
```

## Core Features Implemented

### 1. Realistic Stock Price Algorithm
- **Location**: `core.algorithms.StockPriceCalculator`
- **Features**:
  - Multi-factor price calculation considering 25+ real-world market factors
  - Technical analysis (moving averages, support/resistance)
  - Momentum and trend following
  - Random market noise and occasional major events
  - Mean reversion to prevent unrealistic prices
  - Sector-specific factor weighting

### 2. Comprehensive Market Factors
- **Location**: `core.enums.MarketFactor`
- **Categories**:
  - Economic Indicators (inflation, interest rates, GDP, unemployment)
  - Market Sentiment (investor confidence, fear/greed index, media sentiment)
  - Industry Specific (sector performance, commodity prices, regulations)
  - Global Events (geopolitical events, natural disasters, pandemics)
  - Technical Factors (trading volume, liquidity, algorithmic trading)
  - Company Specific (earnings, dividends, management changes)
  - Seasonal/Cyclical patterns
  - Random Events (market manipulation, flash crashes, social media buzz)

### 3. Stock Market Service
- **Location**: `core.services.StockMarketService`
- **Capabilities**:
  - Stock registration and management
  - Real-time price updates (every 5 seconds)
  - Market statistics and analytics
  - Sector-based analysis
  - Performance tracking (top/worst performers)
  - Market sentiment calculation
  - Event simulation

### 4. Testing Infrastructure
- **Location**: `src/test/java/com/example/quickstocks/StockMarketSimulationTest.java`
- **Features**:
  - Comprehensive simulation with 10 diverse stocks
  - 5-second update intervals
  - Real-time market statistics display
  - Random market event simulation
  - Performance analytics

## Current Implementation Status

### âœ… Completed
- [x] Project structure and IoC architecture
- [x] Comprehensive market factors enum (25+ factors)
- [x] Realistic stock price calculation algorithm
- [x] Stock and market influence models
- [x] Core stock market service
- [x] 5-second update simulation test
- [x] Plugin integration with Bukkit scheduler
- [x] .gitignore file (excludes .idea folder)
- [x] Initial copilot instructions

### ðŸ”„ In Progress
- [ ] Player interaction commands
- [ ] Data persistence
- [ ] Economic integration with Minecraft
- [ ] GUI interfaces
- [ ] Portfolio management
- [ ] Trading mechanics

### ðŸ“‹ Planned Features
- [ ] Player portfolios and trading
- [ ] Market visualization
- [ ] Economic events tied to Minecraft mechanics
- [ ] Configuration system
- [ ] Database integration
- [ ] Web dashboard
- [ ] API endpoints

## Key Design Principles

1. **Realism**: Stock prices behave similarly to real-world markets
2. **Transparency**: All market factors are visible and documented
3. **Scalability**: Architecture supports adding new features easily
4. **Testability**: Comprehensive test coverage with simulation capabilities
5. **Performance**: Efficient algorithms suitable for game server environment

## Development Guidelines

### When Working on This Project:
1. **Always update these instructions** when making significant changes
2. **Maintain the IoC architecture** - new features should follow the established patterns
3. **Document breaking changes** in the section below
4. **Test thoroughly** using the simulation test before deploying changes
5. **Consider performance impact** - this runs in a game server environment
6. **Preserve realism** - market behavior should remain realistic

### Code Standards:
- Use clear, descriptive variable and method names
- Add comprehensive JavaDoc comments for public APIs
- Follow existing error handling patterns
- Maintain thread safety for concurrent operations
- Use appropriate data structures for performance

### Testing:
- Run `StockMarketSimulationTest` to verify market behavior
- Test with various market conditions and events
- Validate performance under load
- Ensure thread safety in multi-player environments

## Breaking Changes Log

### Version 1.0.0-SNAPSHOT (Initial Setup)
- **Date**: 2024-12-XX
- **Changes**: 
  - Initial project structure established
  - Core stock market simulation implemented
  - 25+ market factors defined and integrated
  - Realistic price calculation algorithm developed
  - Test infrastructure created

### Future Breaking Changes
*Add new breaking changes here when they occur, including:*
- *Date of change*
- *Description of what changed*
- *Impact on existing code*
- *Migration steps if needed*

## Architecture Decisions

### Why IoC Architecture?
- **Testability**: Easy to mock dependencies and create unit tests
- **Maintainability**: Clear separation of concerns
- **Extensibility**: New features can be added without modifying existing code
- **Flexibility**: Different implementations can be swapped easily

### Why These Market Factors?
Based on research of real-world stock market influences, covering:
- Economic fundamentals
- Psychological factors
- Technical indicators
- External events
- Company-specific news

### Why 5-Second Updates?
- **Balance**: Frequent enough to be engaging, not too frequent to cause performance issues
- **Realism**: Mimics real-time trading environments
- **Server Performance**: Manageable load for Minecraft servers
- **Player Experience**: Allows for meaningful trading decisions

## Notes for Future Development
- Consider adding seasonal events tied to Minecraft calendar
- Implement company earnings based on player activity
- Add sector rotation based on server events
- Consider integration with economy plugins
- Plan for multi-server market synchronization